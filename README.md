# YOLOv8 è®­ç»ƒè‡ªå·±çš„æ•°æ®

## YOLO:ç®€å²

`YOLO(You Only Look Onceï¼‰`æ˜¯ä¸€ç§æµè¡Œçš„ç‰©ä½“æ£€æµ‹å’Œå›¾åƒåˆ†å‰²æ¨¡å‹ï¼Œç”±`åç››é¡¿å¤§å­¦`çš„`çº¦ç‘Ÿå¤«-é›·å¾·è’™ï¼ˆJoseph Redmonï¼‰`
å’Œ`é˜¿é‡Œ-æ³•å“ˆè¿ªï¼ˆAli Farhadiï¼‰`å¼€å‘ã€‚`YOLO` äº `2015` å¹´æ¨å‡ºï¼Œå› å…¶é«˜é€Ÿåº¦å’Œé«˜ç²¾ç¡®åº¦è€Œè¿…é€Ÿå—åˆ°æ¬¢è¿ã€‚

- `2016` å¹´å‘å¸ƒçš„`YOLOv2` é€šè¿‡çº³å…¥`æ‰¹é‡å½’ä¸€åŒ–`ã€`é”šæ¡†`å’Œ`ç»´åº¦é›†ç¾¤`æ”¹è¿›äº†åŸå§‹æ¨¡å‹ã€‚
- `2018` å¹´æ¨å‡ºçš„`YOLOv3` ä½¿ç”¨`æ›´é«˜æ•ˆçš„éª¨å¹²ç½‘ç»œ`ã€`å¤šé”šå’Œç©ºé—´é‡‘å­—å¡”æ± `è¿›ä¸€æ­¥å¢å¼ºäº†æ¨¡å‹çš„æ€§èƒ½ã€‚
- `YOLOv4`äº `2020` å¹´å‘å¸ƒï¼Œå¼•å…¥äº† `Mosaic` æ•°æ®å¢å¼ºã€æ–°çš„`æ— é”šæ£€æµ‹å¤´`å’Œæ–°çš„`æŸå¤±å‡½æ•°`ç­‰åˆ›æ–°æŠ€æœ¯ã€‚
- `YOLOv5`è¿›ä¸€æ­¥æé«˜äº†æ¨¡å‹çš„æ€§èƒ½ï¼Œå¹¶å¢åŠ äº†è¶…å‚æ•°ä¼˜åŒ–ã€é›†æˆå®éªŒè·Ÿè¸ªå’Œè‡ªåŠ¨å¯¼å‡ºä¸ºå¸¸ç”¨å¯¼å‡ºæ ¼å¼ç­‰æ–°åŠŸèƒ½ã€‚
- `YOLOv6`äº `2022` å¹´ç”±`ç¾å›¢`å¼€æºï¼Œç›®å‰å·²ç”¨äºè¯¥å…¬å¸çš„è®¸å¤šè‡ªä¸»é…é€æœºå™¨äººã€‚
- `YOLOv7`å¢åŠ äº†é¢å¤–çš„ä»»åŠ¡ï¼Œå¦‚ `COCO` å…³é”®ç‚¹æ•°æ®é›†çš„å§¿åŠ¿ä¼°è®¡ã€‚
- `YOLOv8`æ˜¯`YOLO` çš„æœ€æ–°`(20240206)`ç‰ˆæœ¬ï¼Œç”±`Ultralytics` æä¾›ã€‚`YOLOv8` æ”¯æŒå…¨æ–¹ä½çš„è§†è§‰ AI
  ä»»åŠ¡ï¼ŒåŒ…æ‹¬`æ£€æµ‹`ã€`åˆ†å‰²`ã€`å§¿æ€ä¼°è®¡`ã€`è·Ÿè¸ª`å’Œ`åˆ†ç±»`ã€‚è¿™ç§å¤šåŠŸèƒ½æ€§ä½¿ç”¨æˆ·èƒ½å¤Ÿåœ¨å„ç§åº”ç”¨å’Œé¢†åŸŸä¸­åˆ©ç”¨`YOLOv8`çš„åŠŸèƒ½ã€‚

æ›´å¤šçš„èµ„æ–™å¯ä»¥æŸ¥çœ‹ï¼š[https://docs.ultralytics.com/zh/](https://docs.ultralytics.com/zh/)

## å…³äº Makefile

`Makefile` ä¸€èˆ¬ç”¨äº`c`çš„ç¼–è¯‘è¾…åŠ©ï¼Œä½†æ˜¯å®ƒä¸åªæ˜¯å¯ä»¥ç”¨äºç¼–è¯‘ï¼Œå®ƒçš„ç›®æ ‡è§„åˆ™ç‰¹æ€§ï¼Œå¯ä»¥è®©ç”¨æ¥åšä¸€äº›å…¶ä»–çš„äº‹æƒ…ï¼š

- `make clean` æ¸…ç†ç¼“å­˜
- `make clean-all` æ¸…ç†æ‰€æœ‰ç¼“å­˜ï¼ŒåŒ…æ‹¬è®­ç»ƒæ•°æ®
- `make install-dev` å®‰è£…ä¾èµ–
- `make train` å¼€å§‹è®­ç»ƒ
- `make test` æµ‹è¯• `image/test` æ–‡ä»¶å¤¹çš„è¯†åˆ«ç»“æœ
- `make val` éªŒè¯
- `make onnx` å¯¼å‡º `onnx` æ¨¡å‹ï¼Œå…¶ä»–çš„ `ncnn`ä»¥åŠ`mnn`å¯ä»¥é€šè¿‡`onnx`æ¨¡å‹è½¬æ¢
- `make env` åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
- `make labelImg` å¯åŠ¨åˆ†ç±»æ ‡æ³¨å·¥å…·

å¯ä»¥æŸ¥çœ‹ `Makefile`æ–‡ä»¶ä»¥åŠå®˜æ–¹æ–‡æ¡£ï¼Œæ‰‹åŠ¨ä½¿ç”¨ `cli` è¿›è¡Œè®­ç»ƒç­‰æ“ä½œ

## å¼€å§‹å‡†å¤‡

### æ ·æœ¬æ”¶é›†

éœ€è¦å‡†å¤‡è®­ç»ƒæ ·æœ¬ï¼Œè¿™ä¸ªæ ¹æ®æƒ…å†µè¿›è¡Œæ”¶é›†ï¼Œå‰æœŸåšéªŒè¯ï¼Œå¯ä»¥è€ƒè™‘é€šè¿‡æœç´¢å¼•æ“è¿›è¡Œæœé›†ï¼Œæ³¨æ„æ¥æºæ•°æ®æ˜¯å¦æ¶‰åŠç‰ˆæƒä»¥åŠä¸ªäººéšç§é—®é¢˜ï¼Œè¯·ä¸è¦å…¬å¼€å‘å¸ƒæ¶‰åŠç‰ˆæƒä»¥åŠä¸ªäººéšç§é—®é¢˜ã€‚

æœ¬é¡¹ç›®æä¾›çš„è¯ä»¶æ ·æœ¬ï¼Œå‡é€šè¿‡æœç´¢å¼•æ“ä»å…¬å¼€ç½‘ç«™æ‰€è·å–ã€‚ï¼ˆå¦‚æœæä¾›çš„æ ·å¼ æ¶‰åŠåˆ°ç‰ˆæƒæˆ–è€…éšç§é—®é¢˜ï¼Œè¯·å‘`issue`ï¼Œå°†ä¼šè¿›è¡Œå¤„ç†ã€‚ï¼‰

å°†æ”¶é›†åˆ°çš„è®­ç»ƒæ ·æœ¬ï¼Œæ”¾åˆ° `datasets/images/train`ï¼Œæƒ³è¦åšæµ‹è¯•çš„æ ·æœ¬ï¼Œæ”¾åˆ°`datasets/images/test`é‡Œé¢ã€‚

### å¼€å§‹æ ‡æ³¨

å¯ä»¥æ ¹æ®è‡ªå·±çš„å®é™…æƒ…å†µè¿›è¡Œæ ‡æ³¨ï¼Œå½“å‰é¡¹ç›®å¯ä»¥è€ƒè™‘ä½¿ç”¨`labelImg` å·¥å…·è¿›è¡Œæ ‡æ³¨ã€‚æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå°†ä¼šå¯åŠ¨`labelImg`æ ‡æ³¨å·¥å…·ã€‚

```shell
make labelImg
```

> `labelImg` å¿«æ·é”®ï¼š
>
> `A` ä¸Šä¸€å¼ 
>
> `D` ä¸‹ä¸€å¼ 
>
> `W` ç”»æ¡†
>
> å»ºè®®æ‰“å¼€è‡ªåŠ¨ä¿å­˜
>

### å¼€å§‹è®­ç»ƒ

æ ‡æ³¨å®Œæˆä¹‹åï¼Œå°±å¯ä»¥å¼€å§‹è®­ç»ƒäº†ï¼š

```shell
# è®­ç»ƒ epochs 10 
# make train-10
# è®­ç»ƒ
make train
```

~~å¦‚æœå‡ºç°`Dataset 'config.yaml' images not found âš ï¸, missing path`åˆ™å¯èƒ½è·¯å¾„è¯†åˆ«é”™è¯¯ï¼Œè¯·å°†`config.yaml`çš„`path`
æ”¹ä¸º`datasets`ç›®å½•çš„ç»å¯¹è·¯å¾„ã€‚~~ å¢åŠ åŠ¨æ€ä¿®æ”¹ä¸ºå½“å‰ä½ç½®çš„é…ç½®ï¼Œåº”è¯¥ä¸ä¼šå†å‡ºç°è¿™ä¸ªé—®é¢˜ã€‚

è®­ç»ƒçš„ç»“æœå¤§æ¦‚æ˜¯ï¼š

``` 
196 epochs completed in 2.217 hours.
Optimizer stripped from runs/detect/train/weights/last.pt, 6.3MB
Optimizer stripped from runs/detect/train/weights/best.pt, 6.3MB
 ..... 
Validating runs/detect/train/weights/best.pt...
Speed: 1.0ms preprocess, 132.0ms inference, 0.0ms loss, 0.4ms postprocess per image
Results saved to runs/detect/train
ğŸ’¡ Learn more at https://docs.ultralytics.com/modes/train
#yolo task=detect mode=train weight_decay=0.001 box=4.5 model=yolov8x.pt data=config.yaml batch=-1 imgsz=640 epochs=10
```

å¦‚æœæ²¡æœ‰å‡ºç°æŠ¥é”™ï¼Œåˆ™è¡¨ç¤ºè®­ç»ƒå®Œæˆã€‚

### æµ‹è¯•æ¨¡å‹

æµ‹è¯•æ¨¡å‹æ•ˆæœï¼Œå¯ä»¥å°†å›¾ç‰‡æ”¾åˆ° `datasets/images/test` ï¼Œç„¶åæ‰§è¡Œï¼š

```shell
make test
```

æµ‹è¯•çš„ç»“æœå°†ä¼šä¿å­˜åœ¨ç›®å½•`runs/detect/predict(åºå·)`ï¼Œæ ¹æ®è¾“å‡ºçš„æ—¥å¿—æŸ¥çœ‹ã€‚

å¦‚æœæ•ˆæœå¯ä»¥ï¼Œåˆ™å¯ä»¥è€ƒè¯•æ­£å¼çš„æ•°æ®è®­ç»ƒğŸ˜ã€‚

### å¯¼å‡ºä¸º ONNX

é»˜è®¤çš„æ¨¡å‹æ ¼å¼ä¸º`.pt`ï¼Œå¦‚æœæ˜¯æœåŠ¡å™¨è¿›è¡Œè¯†åˆ«ï¼Œåˆ™å¯ä»¥è€ƒè™‘ç›´æ¥ä½¿ç”¨ï¼Œå¦‚æœæ˜¯æƒ³è¦è¾¹ç¼˜è®¡ç®—æˆ–è€…ä¸æƒ³ä½¿ç”¨`.pt`
çš„æ¨¡å‹ï¼Œå¯ä»¥è€ƒè™‘å¯¼å‡ºä¸º`onnx`æ¨¡å‹ï¼Œåªéœ€è¦æ‰§è¡Œ:

```shell
make onnx
```

åˆ™å¯ä»¥ç›´æ¥å¯¼å‡ºä¸º`onnx`æ ¼å¼æ¨¡å‹ã€‚

## é¢å¤–è¯´æ˜

### æ”¯æŒç³»ç»Ÿ

ç›®å‰åªåœ¨ `Linux`ä»¥åŠ`macOS`æµ‹è¯•ï¼Œ`windows`å¯ä»¥è€ƒè™‘ä½¿ç”¨ `wsl` è¿›è¡Œè®­ç»ƒã€‚åç»­å¢åŠ `windows`æ”¯æŒã€‚

### è®­ç»ƒå¡ä½é—®é¢˜

å¦‚æœå¼€å§‹è®­ç»ƒå‡ºç°å¡ä½çš„é—®é¢˜ï¼Œå¯èƒ½æ˜¯æ— æ³•è®¿é—®`https://ultralytics.com`
ï¼Œå¯ä»¥æ£€æŸ¥ä¸€ä¸‹ç½‘ç»œç¯å¢ƒï¼Œæˆ–è€…å°è¯•å°†[front/Arial.ttf](front%2FArial.ttf)å­—ä½“åŠ å…¥åˆ°ç³»ç»Ÿã€‚å†è¿›è¡Œè®­ç»ƒ

### å…³äº `labelImg`

`labelImg` éœ€è¦ä½¿ç”¨ `python3.9` çš„ç‰ˆæœ¬ï¼Œå…¶ä»–ç‰ˆæœ¬ä¼šæœ‰`bug`ï¼Œæ— æ³•ä¿å­˜

### å…³äºå®‰è£…ï¼š

```shell
make install-dev
```

### æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ

```shell
. env/bin/activate
```

### é€€å‡ºè™šæ‹Ÿç¯å¢ƒ

```shell
deactivate
```

### è®­ç»ƒï¼š

```shell
yolo task=detect mode=train model=yolov8n.pt data=config.yaml batch=-1 imgsz=640 epochs=100
```

## ç›¸å…³æ–‡æ¡£

`yolov8` æ–‡æ¡£
https://docs.ultralytics.com/zh/quickstart/

åœ¨çº¿è½¬æ¢æ¨¡å‹ç±»å‹ï¼š
https://convertmodel.com
